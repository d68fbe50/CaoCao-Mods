---
layout: post
title: 【曹操傳】EXE 修改詳解 - 新物品特徵——主動連擊
tags: [CaoCaoZuan]
---

原文出自 [轩辕春秋文化论坛 » 曹操传MOD制作交流 » 曹操传EXE修改详解](http://xycq.online/forum/viewthread.php?tid=82183&extra=page%3D4&authoruid=0&page=1)，僅做繁體化與排版調整。

> 版权归"轩辕春秋文化论坛"所有，作者：慕容雪芸。

<!-- more -->


> 合併特殊效果：
> 曹操傳中的垃圾物品太多了，可以將一些垃圾合併起來，使得垃圾也能發揮作用。
> 例：合併垃圾特徵防禦致命一擊和防禦二次攻擊
> 將 5383 處的 3A 改為39，即可實現道具特殊效果合併，將防禦致命一擊和防禦二次攻擊這兩個垃圾特徵合併為一個，兩個垃圾合為一個，就不垃圾了。

### 方法一：
用 OllyDbg 之類的反匯編工具打開EXE，修改以下幾處地方。

先跳轉到 485DD3 處執行新寫的代碼

```
00405D15   E9 B9000800   JMP 00485DD3
00405D1A   90            NOP
```

然後在 485DD3 處開始寫代碼：

```
00485DD3   8945 FC       MOV DWORD PTR SS:[EBP-4],EAX
00485DD6   6A 3A         PUSH 3A  
00485DD8   8B45 F4       MOV EAX,DWORD PTR SS:[EBP-C]
00485DDB   8B48 08       MOV ECX,DWORD PTR DS:[EAX+8]
00485DDE   E8 261CF8FF   CALL 00407A09
00485DE3   85C0          TEST EAX,EAX
00485DE5   74 07         JE SHORT EKD5.00485DEE
00485DE7   B0 64         MOV AL,64
00485DE9   E9 77FFF7FF   JMP 00405D65
00485DEE   8B45 FC       MOV EAX,DWORD PTR SS:[EBP-4]
00485DF1   E9 25FFF7FF   JMP 00405D1B
```

只須這樣簡單的修改，就可以保證某個兵種在主動攻擊時必定雙擊了。
這個利用了 **EXE** 最末空閒的 0x22D 位元組，占用了 0x23 個位元組，空閒 0x20A 個位元組。
選此處主要是因為大部份人的 **EXE** 在這個地方都是空白的。

### 方法二：
用 `UE` 的修改時，只需要將上面的內存地址減去 400C00 就是實際地址，
用 `UE 打開 **EXE** 修改以下幾個位置：

1. 從 5115 處開始的 6 個位元組改為：E9 B9 00 08 00 90
2. 從 851D3 處開始的0x23個位元組：89 45 FC 6A 3A 8B 45 F4 8B 48 08 E8 26 1C F8 FF 85 C0 74 07 B0 64 E9 77 FF F7 FF 8B 45 FC E9 25 FF F7 FF