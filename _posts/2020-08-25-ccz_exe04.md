---
layout: post
title: 【曹操傳】EXE 修改詳解 - 雜匯篇
tags: [CaoCaoZuan]
---

原文出自 [轩辕春秋文化论坛 » 曹操传MOD制作交流 » 曹操传EXE修改详解](http://xycq.online/forum/viewthread.php?tid=82183&extra=page%3D4&authoruid=0&page=1)，僅做繁體化與排版調整。

> 版权归"轩辕春秋文化论坛"所有，作者：慕容雪芸。

<!-- more -->

本篇是大雜匯，包括一些前面內容的補充

## （二十三）、戰前選擇出場時人物的排列順序：
自 85608 起的 1B 位元組，是戰前出場 27 個兵種的排列順序，第一個 19 是皇帝，第二個00是群雄，可各由交換位置。

## （二十四）、屏蔽開始動畫
2AE0E-2AE12 控制放 Logo.avi
2AE13-2AE17 控制顯示第三波的 Logo
2AE18-2AE1C 控制放 Press.avi
把所有位元組改成 90 即可屏蔽相應動畫

## （二十五）、芭蕉扇屬性修正
這個可以用 VAN 太守的補丁修正。
這個也許有許多人還不知道，芭蕉扇其實是加強地系策略，把 3B64A 處的 02 改為 03 加強的就是風策略了。

## （二十六）、兵種特徵修改。
4D50, 4D54, 4D62　(原值為土偶 60% 混亂)
4DB4, 4DB8, 4DC6　(原值為木人 60% 中毒)
4E18, 4E1C, 4E2A　(原值為馴熊師 60% 麻痹)
特性兵種即為兵種代碼，取值範圍 00-34；特性概率按百分比計算，取值範圍 00-64；特性效果取值為以下效果的或：
02麻痹，04禁咒，08混亂，10中毒

6C33，6C39 穿透攻擊起止兵種(原值為重炮車至霹靂車)
6C47 穿透類型(原值為十字穿透)
6C3F 穿透攻擊兵種(原值為馴虎師)
6C4D 穿透類型(原值為蛇矛穿透)
兵種代碼取值範圍 00-34，注意 6C39 一定不小於 6C33，6C3F 一定大於 6C39；穿透類型取值如下：
01十字，02九宮，03大沒羽箭，04蛇矛，05長蛇矛(穿六個)，06大大沒羽箭，其餘為正常攻擊。

每回合起始時對周圍8人自動釋放狀態魔法：
兵種判定：3C627 (原值為 0C 是舞娘)
釋放條件：3BC05-06，原值為有人有異常狀態時釋放，改為 9090 則無條件釋放
下面太過復雜，省略。

## （二十七）兵種相剋
代碼太長，用 `UE` 法不好修改，簡要說說最基礎的修改方法就是了：
3B1B6、3B1C4、3B1D1 這三個地方的 03、11、10 指的是騎兵、馴虎、馴熊三個兵種受到 150% 的遠距傷害。
3B23F 處的 03 指騎兵只受到步兵 60% 的傷害，3B27C、3B28A 處的 02 和 05 分別指弓兵和炮車受到步兵 150% 的攻擊傷害。

## （二十八）、道具特殊效果修改
騎馬攻擊：
3B2A3 原值為 03，表示騎兵，可以改為任意一類部隊。

合併特殊效果：
曹操傳中的垃圾物品太多了，可以將一些垃圾合併起來，使得垃圾也能發揮作用。
例：合併垃圾特徵防禦致命一擊和防禦二次攻擊
將 5383 處的 3A 改為39，即可實現道具特殊效果合併，將防禦致命一擊和防禦二次攻擊這兩個垃圾特徵合併為一個，兩個垃圾合為一個，就不垃圾了。

PS：合並後的新特殊效果指定為防禦致命一擊，防禦二次攻擊為空特殊效果。可以自行反匯編程式將這個空效果改為其它效果。比如偶是新寫了一個絕對連擊的特殊效果。

特殊效果的對應編號是從 13 開始算起，一直到 3E 結束，對應的特殊效果可以用 DATA 修改器打開 DATA 查看  
3C376，3C383 處的 16代表 **每回合獲得武器經驗** 這個特殊效果
3C3B5，3C3C3 處的 17代表 **每回合獲得防具經驗** 這個特殊效果
5863 處的 2C 代表的是無反擊攻擊這個效果。

## （二十九）、許子將教學和其它文字的修改。
1. 許子將教學
從 8B370 處開始就是許子將教學的內容，可自行修改，\n代表回車，可以換行，注意一個就是兩人說話的內容的開始位置最好和原本一樣，不然會有想不到的副作用。（如果位置不一樣的話，要在 **EXE** 相應的位置進行修改，以後再說有關這個的內容吧。）
2. 三國志曹操傳
8D24A 處的 "三國志曹操傳" 幾個字改掉的話會使遊戲沒有音樂，必須下載解壓後的 mp3serv.dat，用 `UE` 打開，把 A1C0 處的 "三國志曹操傳" 統一改掉就可以了
3. **EXE** 中的五個 **宋體** 含義：
    + 第一個 **宋體** 對應的是戰場名稱的大字。
    + 第二個 **宋體** 對應 hp 條、mp條等各種數字。（？）
    + 第三個？？？
    + 第四個 **宋體** 對應所有框架裡文字的效果。
    + 第五個 **宋體** 對應所有的文字，包括姓名、對話、標題、信息和出兵畫面中的什麼順序那幾個字。
4. 其它文字
其它的文字都可以自行修改，方法參照上面和第一項，不再一一說明瞭

## （三十）其它的一些補充（基本都是沒用的內容）
1. 戰場特殊形象
60D9 開始 174 個位元組，取值範圍 0-1E，代表前 174 個人物的戰場特殊形象，這個沒有必要記住了，太過麻煩，用葉落姐姐的戰場形象指定器來修改吧。
2. 戰場形象之眾生平等：
把 5E2E 開始的三個位元組改為 2E、00、90，就能看見滿屏幕的輕步兵，不管你是什麼兵種，特殊造型還是普通造型，一轉二轉三轉，統統變成輕步兵。當然，敵我友的顏色還是不同的。
3. 無攻擊力修改方法
把 654B 開始的五個位元組改為 25、00、00、00、00，所有人的攻擊力都會變成 0，雙擊、暴擊就像撓癢一樣，好好的和電腦比賽用策略吧。
4. 普通裝備變為特殊裝備方法
修改 BB92 處為 00，可以讓普通裝備變成特殊裝備，一樣可以擁有特殊效果，一樣是 9 級上限，不過這樣子又有不方便的地方，所以沒什麼用，要讓普通裝備有特殊效果，有其它比較合適的方法。

## （三十一）、關於突破 174人 限制之戰場形象篇：
首先用葉落秋寒的戰場形象指定器或周瑜的 Ekd5exe 對戰場形象進行擴展，然後修改 5E7E-5E7F 處的 AD 00，改為 00 02 可以使戰場形象指定對前 512 人有效，最大可改為 270 對前 624 人有效。取值為式為 0~0x270，注意機器碼是前後對倒。當然，這個的前提條件是此處你沒有寫入其它函數。
不過，用葉落姐姐的戰場形象指定器只能指定前 174 人，後面的要自己手動指定。

## （三十二）、擴展部隊移動速度，使其對全 27 個兵種有效
3F390 處改為 1A
3F39A 處改為 C4
3F3C0 處改為 AE
然後，從 3F3C4 開始的 27 個位元組寫移動速度，取值為 00-01，00 代表高速移動（如騎兵），01 代表慢速移動（如步兵）。
後面從 3F3DE 處一直到 3F3EC 全部寫 0 即可，不寫關係也不大。

## （三十三）、擴展部隊移動聲音，使其對全 27 個兵種有效
3E83A 處改為 1A
3E844 處改為 AC
3E8A4 處改為 58
3E8A8 處改為 61
然後，從 3E8AC 開始的 27 個位元組寫移動聲音，取值 00-02，00 代表馬蹄聲（騎兵），01 代表車輪聲（炮車），02 代表沙沙聲（步兵）

## （三十四）、升級經驗的修改
修改以下 7 個地方的數值：7d80、7d87、4f55B、4f56c、50559、50571、5073f、50755、7891C。取值 0x7F 以下正常，FF 表示不升級，想要突破這個限制的，請看匯編部份。

## （三十五）、新人固定等級加入修改方法
修改從 B572 開始的的 7 個位元組，改為：83 7D 8C 00 90 90 90。這樣子，無論我方人物幾級，新武將加入時都按一級計算，想要新武將 N 級加入，就增加 N-1 級。

## （三十六）、敵方出場等級計算方式的改變
17C96 ~ 17C9E 處改為 2C 01 73 05 B8 00 00 00 00
17DA3 ~ 17dAA 處改為 C6 45 E0 00 EB 0B 00 00
17DFE ~ 17DFF 處改為 90 90

註：原曹操傳敵軍出場武將和小兵是根據我方出戰武將的平均等級來加成計算的。我方的平均等級，是去掉高四分之一和低四分之一後的武將等級的平均。現在設為敵方取我方等級最高的人來計算敵方等級，可變動位置 17C97 處，該處指我方最高 N 個人的平均等級。

## （三十七）、穿牆大法
將 3EC33 處的 F8 改為 C8，你會發現意想不到的事情，原本不能移動的地形，只要裝備上惡路移動的物品，就可以在所有地形自由的移動了（地下、火上、城牆……照樣走）

## （三十八）、改來的敵方武將可以升級
將 7D67 處修改為 FF，可以讓所有我方人物都可以升級。

## （三十八）、頭像上限的擴展
1DCF1 處開始的 E4 00
1DCFD 處開始的 E4 00

可將此處改成你想要的數字，如果想要讓 512 人都有自己的頭像，那就修改為 00 02，即 0x200，由於 `UE` 是改機器碼，所以要注意前後顛倒。

## （三十九）、練果模式的修改
N 級裝備賣出得到果子修改在 C994 處，原值為 03，表示等級為 3 的裝備賣出得到果子。

賣裝備得什麼果子在 CA12 ~ CA22 處修改，取值範圍為為 00 ~ 09
取值意義：
00——經驗果
01、04——武力果
02、03——好運果
05、06——智力果
07——統帥果
08——敏捷果
09——不得到果子

實際得到的物品不是由跳轉表決定的，實際上得到的物品是在以下六個地方修改：
C9C2 處的 67 表示經驗果，對應 00
C9C8 處的 62 表示武力果，對應 01、04
C9CE 處的 66 表示好運果，對應 02、03
C9D4 處的 63 表示智力果，對應 05、06
C9DA 處的 64 表示統率果，對應 07
C9E0 處的 65 表示敏捷果，對應 08

可以自動更改，數字對應 DATA 中的編號。

## （四十）、致命一擊特殊台詞修改方法
從 89C30 開始，每四個位元組為一組，一共 21 組，對應數值為武將在 DATA 中的編號。
所有人都不使用特殊台詞的修改法：把 B46F-B475 處全部改為 90。

## （四十一）、武器攻擊時所獲得經驗修改
2E3C 處的 03，指武器攻擊命中與自己等級相同或更高等級敵人時所得的經驗，命中比自己等級低的敵人時，經驗是上面的數值減少 1。
2E56 處的 01，指武器攻擊時未命中敵人所得的經驗。

## （四十二）、防具受攻擊時所獲得經驗修改
2F29 處的 04，指防具受到與自己等級相同或更高等級敵人攻擊命中時所得的經驗，指防具受到比自己等級低的敵人攻擊命中時所得的經驗是上面的數值減少 1。
2F43 處的 01，指防具受到與自己等級相同或更高等級敵人攻擊未命中時所得的經驗

## （四十三）、不匹配裝備修改
將 726B 和 1422A 處的 75 修改為 EB，效果同周瑜的補丁，即：劇本中給武將設定道具、改變兵種的時候，合適位置上的不匹配裝備仍然會在游戲中保留。

例如：給弓兵指定騎馬攻擊的劍，給文官指定防具為鎧甲。不過，要注意一點，由於 CCZ 的 AI 問題，最好你還是不要給電腦指定不匹配的武器，因為指定後電腦不會主動攻擊。防具和輔助道具則沒有此問題。

## （四十四）、有關增減三轉兵種的補充
以下方法為增加三轉兵種的方法，經測試有效，不過是否有後遺症，或是其它負面效果未知。
這個要修改以下六個地址：5D13、B890、1BA5E、41D1E、41D4F、6808B
原值為 26，代表巫女（0x26）及巫女以前的兵種，如果要增加一個三轉兵種，就加 3。比如：改為 29，這樣一來，西涼騎兵、黃巾軍、海盜這三個兵種就成了新的一組三轉兵種，已通過測試的有：敵軍、友軍、新人和我軍使用印綬轉職。


## （四十五）、有關許子將教學的補充
從 327B7 處開始的 5 個 `E8 77 19 00 00`，將此處全部改為 90 就可以去除許子將教學開寶物圖鑒得全寶物這一選項，可以保留教學，而開寶物存檔又得不到寶物。

## （四十六）、特殊效果——輔助四系策略
將 3B64A 開始的兩個位元組改為 03 7F，這樣輔助風系策略這個特殊效果就變成了輔助四系策略了（對火、風、水、土四系都有效）

## （四十七）、有關策略動畫部份
20BBEH 開始 65 個位元組 取值範圍 0-9，有關策略帶動畫（朱雀那一類的動畫）部份，從火龍開始算起，一直到白虎結束。
00~09，分別是火龍、水龍、風龍、土龍，八陣圖，青龍、朱雀、玄武、白虎，沒有

大致上就提了這些，以後還有其它的再補充好了，待續……
附件為許子將教學的全內容，僅供參考。

----

其他補充說明
原文，[作者obin（阿斌）](http://www.xycq.net/forum/viewthread.php?tid=153249&highlight=)[^1]


策略類
（一）、策略動畫（包含聲音）
從 858C0H 開始的 68 個位元組，從灼熱開始算起，到白虎結束，取值範圍 00-69，以下是值所代表的動畫：
![策略動畫](https://i.imgur.com/nlO9qnj.png)

紅色值表示「中招前的動畫」，需要再修改以下值才能決定「中招時的動畫」，否則會導致當機
從 20BBEH 開始的 65 個位元組，從火龍開始算起，到白虎結束，取值範圍 00-09，以下是值所代表的動畫：
00 烈火
01 激流
02 龍捲
03 山嵐
04 所有附加屬性的動畫，視法術類型而定，若是"純傷害"類型的法術會顯示"巨岩"
05 閃電
06 爆焰
07 無動畫
08 大補給
09 無（導致當機）


（二）、策略地形限制
從 1FD3CH 開始的 62 個位元組，從灼熱開始算起，到冥想結束，取值範圍 00-11，以下是值所代表的限制：
00 火類地形
01 水類地形
02 風類地形
03 地類地形
04 ~ 11 全地形（建議用11，關繫到電腦的施放策略判斷）
若要將火、水、風、地類策略設定為在其他地形可施放，必須將 1FEA2H ~ 1FEB5 對應的值一起更改，從灼熱到巨岩，04 為全地形施放

兵種類
（一）、擴展部隊攻擊聲音，使其對全 27 個兵種有效
3F503H 處改為 1A
3F50DH 處改為 37
3F533H 處改為 21
然後，從 3F537H 開始的 27 個位元組寫攻擊聲音，取 值00-01，
00 表示劍或寶劍的攻擊聲音，01 表示其它武器的攻擊聲音。

（二）、新人固定等級加入修改方法（原本會造成當機）
B579H 處改為 EB
這樣子，無論我方人物幾級，新武將加入時都按一級計算，想要新武將 N 級加入，就增加 N-1 級。

----
[^1]: 連結已失效